{"version":3,"file":"SidebarNavFolder-a7d7ef3c.js","sources":["../../src/shared/ui_kit/sidebar-nav/SidebarNavFolder.vue"],"sourcesContent":["<template>\n  <li v-if=\"!item.disabled\" class=\"nav-folder\">\n    <div :class=\"['nav-folder__header', { 'nav-folder__header--active': item.active && !isExpanded }]\" @click.prevent=\"toggleFolder\">\n      <IconBase v-if=\"item.icon\" class=\"nav-folder__icon\" :name=\"item.icon\" />\n      <span :class=\"['ty-forms-text', 'nav-folder__title', { 'nav-folder__title--subfolder': subFolder }]\">{{ item.title }}</span>\n\n      <div v-if=\"item.badge\" class=\"nav-folder__badge\">\n        <span class=\"nav-folder__badge-title\">\n          {{ item.badge }}\n        </span>\n      </div>\n\n      <div class=\"nav-folder__arrow-icon-container\">\n        <IconBase\n          v-if=\"item.children\"\n          name=\"arrow\"\n          :class=\"['nav-folder__arrow-icon', { 'nav-folder__arrow-icon--expanded': isExpanded }]\"\n        />\n      </div>\n    </div>\n\n    <ul\n      v-if=\"item.children\"\n      :class=\"['nav-folder__items', { 'nav-folder__items--expanded': isExpanded }]\"\n      :style=\"{ 'max-height': isExpanded ? `${getItemListMaxHeight(item.children)}px` : 0 }\"\n    >\n      <template v-for=\"(navItem, i) in props.item.children\" :key=\"i\">\n        <SidebarNavItem v-if=\"!navItem.children\" :item=\"navItem\" :type=\"getItemType(props.item.children, i)\" />\n        <SidebarNavFolder v-else :item=\"navItem\" subFolder />\n      </template>\n    </ul>\n  </li>\n</template>\n\n<script setup lang=\"ts\">\nimport IconBase from \"@/shared/ui_kit/icon/IconBase.vue\";\nimport SidebarNavItem from \"@/shared/ui_kit/sidebar-nav/SidebarNavItem.vue\";\nimport type { SidebarItemType } from \"@/shared/ui_kit/sidebar-nav/types/SidebarNavItemType\";\nimport { ref, watch } from \"vue\";\nimport { bool, object } from \"vue-types\";\n\nconst props = defineProps({\n  item: object<SidebarItemType>().isRequired,\n  subFolder: bool().def(false),\n});\n\nconst getItemType = (list: SidebarItemType[\"children\"], index: number) => {\n  if (!props.subFolder) {\n    return \"default\";\n  }\n\n  return list && list.length === index + 1 ? \"lastSubitem\" : \"subitem\";\n};\n\nconst isExpanded = ref(false);\nconst toggleFolder = () => {\n  isExpanded.value = !isExpanded.value;\n};\n\nconst getItemListMaxHeight = (items: SidebarItemType[]) => {\n  const CHARS_PER_LINE = 15;\n  const LINE_HEIGHT = 40;\n  const lineCount = items.reduce((acc, cur) => Math.ceil(cur.title.length / CHARS_PER_LINE) + acc, 0);\n  let result = LINE_HEIGHT * lineCount;\n  items.forEach((item) => {\n    if (item.children) {\n      result += getItemListMaxHeight(item.children);\n    }\n  });\n  return result;\n};\n\nwatch(\n  [() => props.item.active],\n  () => {\n    if (props.item.active && !isExpanded.value) {\n      toggleFolder();\n    }\n  },\n  { immediate: true }\n);\n</script>\n\n<style scoped lang=\"scss\">\n.nav-folder {\n  cursor: pointer;\n}\n\n.nav-folder__items {\n  overflow: hidden;\n\n  transition: max-height var(--transition);\n}\n\n.nav-folder__header {\n  display: flex;\n  align-items: baseline;\n\n  width: 100%;\n  padding: 10.5px 30px;\n\n  transition: background-color var(--transition);\n\n  &--active {\n    background-color: var(--blue-alise);\n  }\n\n  &:hover {\n    background-color: var(--blue-alise);\n  }\n}\n\n.nav-folder__icon {\n  flex-shrink: 0;\n\n  margin-right: 10px;\n\n  fill: var(--brandeis-blue);\n}\n\n.nav-folder__arrow-icon-container {\n  flex-shrink: 0;\n\n  margin-left: auto;\n  padding: 0 5px;\n}\n\n.nav-folder__arrow-icon {\n  transition: transform var(--transition);\n  transform: rotate(-90deg) scale(-1, 1);\n\n  fill: var(--brandeis-blue);\n\n  &--expanded {\n    transform: rotate(-90deg) scale(1, 1);\n  }\n}\n\n.nav-folder__title--subfolder {\n  color: var(--grey);\n}\n</style>\n"],"names":["getItemType","list","index","props","isExpanded","ref","toggleFolder","getItemListMaxHeight","items","result","acc","cur","item","watch"],"mappings":"gnBA8CMA,EAAc,CAACC,EAAmCC,IACjDC,EAAM,UAIJF,GAAQA,EAAK,SAAWC,EAAQ,EAAI,cAAgB,UAHlD,UAMLE,EAAaC,EAAI,EAAK,EACtBC,EAAe,IAAM,CACdF,EAAA,MAAQ,CAACA,EAAW,KAAA,EAG3BG,EAAwBC,GAA6B,CAIzD,IAAIC,EAAS,GADKD,EAAM,OAAO,CAACE,EAAKC,IAAQ,KAAK,KAAKA,EAAI,MAAM,OAAS,EAAc,EAAID,EAAK,CAAC,EAE5F,OAAAF,EAAA,QAASI,GAAS,CAClBA,EAAK,WACGH,GAAAF,EAAqBK,EAAK,QAAQ,EAC9C,CACD,EACMH,CAAA,EAGT,OAAAI,EACE,CAAC,IAAMV,EAAM,KAAK,MAAM,EACxB,IAAM,CACAA,EAAM,KAAK,QAAU,CAACC,EAAW,OACtBE,GAEjB,EACA,CAAE,UAAW,EAAK,CAAA"}