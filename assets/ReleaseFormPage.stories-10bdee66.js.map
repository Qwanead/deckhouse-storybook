{"version":3,"file":"ReleaseFormPage.stories-10bdee66.js","sources":["../../src/shared/ui_kit/form/FormGrid.vue","../../src/pages/releases/form/components/Form.vue","../../src/pages/releases/form/Page.vue"],"sourcesContent":["<template>\n  <div class=\"from-grid\">\n    <slot />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.from-grid {\n  display: grid;\n\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 40px;\n  grid-auto-flow: row;\n}\n\n:deep(.from-grid__new-line) {\n  grid-column: 1 / span 1;\n}\n\n:deep(.from-grid__full-row) {\n  grid-column: span 2;\n}\n</style>\n","<template>\n  <CardBlock class=\"release-form\">\n    <template #content>\n      <form class=\"release-form__wrapper\">\n        <FromBlockTitle toggle level=\"2\" v-model=\"values.releaseChannelOn\">Обновления</FromBlockTitle>\n\n        <FormGrid>\n          <FormBlock class=\"from-grid__full-row\" :error=\"error\">\n            <template #title>\n              <FromBlockTitle docIcon :showApiPath=\"showApiPath\" apiPathText=\"spec.settings.update.mode\" :error=\"error\" @showDoc=\"showDoc\">\n                {{ $t(\"releases.releaseChannel.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputRadioButton :options=\"releaseChannelOptions\" v-model=\"values.releaseChannel\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock :error=\"error\" :comment=\"$t(`releases.mode.help${isManualUpdateMode ? '_manual' : ''}`)\">\n            <template #title>\n              <FromBlockTitle docIcon :showApiPath=\"showApiPath\" apiPathText=\"spec.settings.update.mode\" :error=\"error\" @showDoc=\"showDoc\">\n                {{ $t(\"releases.mode.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputRadioButton :options=\"updateModeOptions\" v-model=\"values.update.mode\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock class=\"from-grid__new-line\" :error=\"error\" :comment=\"$t('releases.disruptionApprovalMode.help')\">\n            <template #title>\n              <FromBlockTitle\n                docIcon\n                :showApiPath=\"showApiPath\"\n                apiPathText=\"spec.settings.disruptionApprovalMode\"\n                :error=\"error\"\n                @showDoc=\"showDoc\"\n              >\n                {{ $t(\"releases.disruptionApprovalMode.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputRadioButton :options=\"disruptionApprovalModeOptions\" v-model=\"values.update.disruptionApprovalMode\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock class=\"from-grid__full-row\" :error=\"error\">\n            <template #title>\n              <FromBlockTitle\n                docIcon\n                :showApiPath=\"showApiPath\"\n                apiPathText=\"spec.settings.update.windows\"\n                :error=\"error\"\n                @showDoc=\"showDoc\"\n              >\n                {{ t(\"releases.windows.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputTimeWindow v-model=\"values.update.windows\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock class=\"from-grid__full-row\" :error=\"error\" :comment=\"$t('releases.notification.help')\">\n            <template #title>\n              <FromBlockTitle\n                docIcon\n                :showApiPath=\"showApiPath\"\n                apiPathText=\"spec.settings.update.notification\"\n                toggle\n                v-model=\"values.update.notification.enabled\"\n                :error=\"error\"\n                @showDoc=\"showDoc\"\n              >\n                {{ $t(\"releases.notification.title\") }}\n              </FromBlockTitle>\n            </template>\n          </FormBlock>\n\n          <FormBlock :error=\"error\" :comment=\"$t('releases.notification.minimalNotificationTime.help')\">\n            <template #title>\n              <FromBlockTitle\n                :showApiPath=\"showApiPath\"\n                apiPathText=\"spec.settings.update.notification.minimalNotificationTime\"\n                :error=\"error\"\n              >\n                {{ $t(\"releases.notification.minimalNotificationTime.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <div class=\"release-form__period\">\n                <InputNumber class=\"release-form__period-input\" v-model=\"values.update.notification.minimalNotificationTime.hours\" />\n                <span class=\"ty-forms-text release-form__period-text release-form__period-text--hours\">часов</span>\n                <InputNumber class=\"release-form__period-input\" v-model=\"values.update.notification.minimalNotificationTime.mins\" />\n                <span class=\"ty-forms-text release-form__period-text\">минут</span>\n              </div>\n            </template>\n          </FormBlock>\n\n          <FormBlock :error=\"error\">\n            <template #title>\n              <FromBlockTitle :showApiPath=\"showApiPath\" apiPathText=\"spec.settings.update.notification.webhook\" :error=\"error\">\n                {{ $t(\"releases.notification.webhook.title\") }}\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputTextConfirm placeholder=\"http://example.com\" v-model=\"values.update.notification.webhook\" :error=\"error\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock :error=\"error\">\n            <template #title>\n              <FromBlockTitle :showApiPath=\"showApiPath\" apiPathText=\"spec.settings.update.notification.webhook\" :error=\"error\">\n                Авторизация\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputTextConfirm\n                label=\"Логин\"\n                required\n                placeholder=\"Логин\"\n                v-model=\"values.update.notification.auth.username\"\n                :error=\"error\"\n              />\n              <InputPassword\n                label=\"Пароль\"\n                required\n                placeholder=\"Пароль\"\n                v-model=\"values.update.notification.auth.password\"\n                :error=\"error\"\n              />\n              <InputRadioButton :options=\"notificationAuthModeOptions\" v-model=\"values.update.notification.auth.type\" />\n            </template>\n          </FormBlock>\n\n          <FormBlock :error=\"error\">\n            <template #title>\n              <FromBlockTitle :showApiPath=\"showApiPath\" apiPathText=\"spec.settings.update.notification.tlsSkipVerify\" :error=\"error\">\n                Пропустить валидацию TLS сертификата при запросе webhook\n              </FromBlockTitle>\n            </template>\n\n            <template #content>\n              <InputRadioButton :options=\"tlsSkipVerifyOptions\" v-model=\"values.update.notification.tlsSkipVerify\" />\n            </template>\n          </FormBlock>\n        </FormGrid>\n      </form>\n    </template>\n  </CardBlock>\n</template>\n\n<script setup lang=\"ts\">\nimport FormGrid from \"@/shared/ui_kit/form/FormGrid.vue\";\nimport FromBlockTitle from \"@/shared/ui_kit/form/FromBlockTitle.vue\";\nimport FormBlock from \"@/shared/ui_kit/form/FormBlock.vue\";\nimport InputRadioButton from \"@/shared/ui_kit/form/InputRadioButton/InputRadioButton.vue\";\nimport InputTimeWindow from \"@/shared/ui_kit/form/InputTimeWindow.vue\";\nimport InputNumber from \"@/shared/ui_kit/form/InputText/InputNumber.vue\";\nimport InputTextConfirm from \"@/shared/ui_kit/form/InputText/InputTextConfirm.vue\";\nimport InputPassword from \"@/shared/ui_kit/form/InputText/InputPassword.vue\";\nimport { reactive, ref, computed } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport CardBlock from \"@/shared/ui_kit/card/CardBlock.vue\";\n\nconst { t } = useI18n();\n\nconst showApiPath = ref(true);\nconst error = ref(\"\");\n\nconst values = reactive({\n  releaseChannelOn: true,\n  releaseChannel: \"Beta\",\n  update: {\n    mode: \"Auto\",\n    disruptionApprovalMode: \"Manual\",\n    windows: [{ days: [\"Fri\", \"Sat\", \"Sun\"], from: \"02:00\", to: \"08:00\" }],\n    notification: {\n      enabled: true,\n      minimalNotificationTime: {\n        hours: \"9\",\n        mins: \"14\",\n      },\n      webhook: \"\",\n      auth: { type: \"\", username: \"user\", password: \"\" },\n      tlsSkipVerify: \"\",\n    },\n  },\n});\n\nconst isManualUpdateMode = computed(() => values.update.mode === \"Manual\");\n\nconst releaseChannelOptions = computed(() => [\n  { name: t(\"releases.channel_alpha\"), value: \"Alpha\" },\n  { name: t(\"releases.channel_beta\"), value: \"Beta\" },\n  { name: t(\"releases.channel_earlyaccess\"), value: \"EarlyAccess\" },\n  { name: t(\"releases.channel_stable\"), value: \"Stable\" },\n  { name: t(\"releases.channel_rocksolid\"), value: \"RockSolid\" },\n  { name: t(\"releases.channel_none\"), value: undefined },\n]);\n\nconst updateModeOptions = computed(() => [\n  { name: t(\"releases.update_mode_manual\"), value: \"Manual\" },\n  { name: t(\"releases.update_mode_auto\"), value: \"Auto\" },\n  { name: t(\"releases.update_mode_default\"), value: undefined },\n]);\n\nconst disruptionApprovalModeOptions = [\n  { name: \"Ручной\", value: \"Manual\" },\n  { name: \"Авто\", value: \"Auto\" },\n  { name: \"По умолчанию\", value: undefined },\n];\n\nconst notificationAuthModeOptions = [\n  { name: \"Нет\", value: \"none\" },\n  { name: \"Http-auth\", value: \"basic\" },\n  { name: \"Bearer-токен\", value: \"token\" },\n];\n\nconst tlsSkipVerifyOptions = [\n  { name: \"Да\", value: true },\n  { name: \"Нет\", value: false },\n  { name: \"По умолчанию\", value: undefined },\n];\n\nconst showDoc = () => {\n  console.log(\"showDoc\");\n};\n</script>\n\n<style scoped lang=\"scss\">\n.release-form {\n  padding-top: 10px;\n  padding-bottom: 60px;\n}\n\n.release-form__wrapper {\n  display: flex;\n  flex-direction: column;\n\n  width: 982px;\n\n  gap: 30px;\n}\n\n.release-form__period {\n  display: flex;\n  align-items: center;\n\n  gap: 10px;\n}\n\n.release-form__period-input {\n  width: 81px;\n}\n\n.release-form__period-text {\n  color: var(--grey);\n\n  &--hours {\n    margin-right: 10px;\n  }\n}\n</style>\n","<template>\n  <PageLayout>\n    <template #title>{{ $t(\"releases.releaseChannel.title\") }}</template>\n\n    <template #info>\n      <ReleaseInfo :params=\"infoParams\" :contentLoading=\"contentLoading\" />\n    </template>\n\n    <template #tabs>\n      <TabsBlock :tabs=\"tabs\" />\n    </template>\n\n    <template #content>\n      <ReleaseForm />\n    </template>\n  </PageLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport ReleaseInfo from \"@/components/releases/ReleaseInfo.vue\";\nimport ReleaseForm from \"@/pages/releases/form/components/Form.vue\";\nimport PageLayout from \"@/shared/ui_kit/layouts/PageLayout.vue\";\nimport TabsBlock from \"@/shared/ui_kit/tabs/TabsBlock.vue\";\nimport type { ParamItemInterface } from \"@/shared/ui_kit/params/ParamsItem.vue\";\nimport type { RouteLocationRaw } from \"vue-router\";\nimport { onMounted, ref } from \"vue\";\n\nconst tabs = [\n  { title: \"Версии\", routeName: \"Home\", active: false, marked: true },\n  { title: \"Настройки\", routeName: \"Home\", active: true },\n];\n\nconst infoParams: { title: string; route: RouteLocationRaw; items: ParamItemInterface[] }[] = [\n  {\n    title: \"Общая информация\",\n    route: { name: \"Home\" },\n    items: [\n      { title: \"Ваш формат времени\", value: \"Europe/Moscow (UTC+03:00)\" },\n      { title: \"Канал обновлений\", value: \"Alpha\" },\n      { title: \"Режим обновлений\", value: \"Авто\" },\n      { title: \"Подтверждение опасных изменений\", value: \"По умолчанию\" },\n    ],\n  },\n  {\n    title: \"Уведомления об обновлениях\",\n    route: { name: \"Home\" },\n    items: [\n      { title: \"Оповещение\", value: \"за 1 час\" },\n      { title: \"URL\", value: \"http://acme.com\", type: \"link\" },\n      { title: \"Авторизация\", value: \"Bearer-токен\" },\n      { title: \"Пропустить валидацию TLS\", value: \"По умолчанию\" },\n    ],\n  },\n  {\n    title: \"Окна обновлений\",\n    route: { name: \"Home\" },\n    items: [\n      { title: \"Пн, Вт, Вс\", value: \"с 19:00 до 23:00\" },\n      { title: \"Пн, Чт\", value: \"с 11:00 до 12:30\" },\n    ],\n  },\n];\n\nconst contentLoading = ref(true);\n\nonMounted(() => setTimeout(() => (contentLoading.value = false), 1500));\n</script>\n"],"names":["_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","t","useI18n","showApiPath","ref","error","values","reactive","isManualUpdateMode","computed","releaseChannelOptions","updateModeOptions","disruptionApprovalModeOptions","notificationAuthModeOptions","tlsSkipVerifyOptions","showDoc","tabs","infoParams","contentLoading","onMounted"],"mappings":"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"}